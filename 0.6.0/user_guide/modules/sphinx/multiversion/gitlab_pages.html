<!DOCTYPE html>
<html lang="en" data-accent-color="grass" data-content_root="../../../../">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Hosting on GitLab Pages - Toolbox</title><link rel="index" title="Index" href="../../../../genindex.html" /><link rel="search" title="Search" href="../../../../search.html" /><link rel="next" title="Frequently Asked Questions" href="faq.html" /><link rel="prev" title="Hosting on GitHub Pages" href="github_pages.html" /><script>
    function setColorMode(t){let e=document.documentElement;e.setAttribute("data-color-mode",t);let a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,s=t;"auto"===t&&(s=a?"dark":"light"),"light"===s?(e.classList.remove("dark"),e.classList.add("light")):(e.classList.remove("light"),e.classList.add("dark"))}
    setColorMode(localStorage._theme||"auto");
  </script><link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=397bb51e" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/shibuya.css?v=83eaa723" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link media="print" rel="stylesheet" type="text/css" href="../../../../_static/print.css?v=20ff2c19" />
    
    <meta property="og:type" content="website"/><meta property="og:title" content="Hosting on GitLab Pages"/>
<meta name="twitter:card" content="summary"/>
  </head>
<body><div class="sy-head">
  <div class="sy-head-blur"></div>
  <div class="sy-head-inner sy-container mx-auto">
    <a class="sy-head-brand" href="../../../../index.html">
      <img class="light-logo" src="../../../../_static/light-exasol-logo.svg" alt="Exasol Toolbox" height="28" loading="lazy" />
      <img class="dark-logo" src="../../../../_static/dark-exasol-logo.svg" alt="Exasol Toolbox" height="28" loading="lazy" />
      <strong>Exasol Toolbox</strong>
    </a>
    <div class="sy-head-nav" id="HeadNav">
      <nav class="sy-head-links"></nav>
      <div class="sy-head-extra flex items-center print:hidden"><form class="searchbox flex items-center" action="../../../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <kbd>/</kbd>
</form><div class="nav-versions">
    <button type="button" aria-label="Versions">
      <span class="md:hidden">Versions</span>
      <span class="hidden md:inline">0.6.0</span>
      <i class="i-lucide chevron-down"></i>
    </button>
    <div class="nav-versions-choices"><ul><li><a href="../../../../../0.19.0/index.html">0.19.0</a></li><li><a href="../../../../../0.18.0/index.html">0.18.0</a></li><li><a href="../../../../../0.17.0/index.html">0.17.0</a></li><li><a href="../../../../../0.16.0/index.html">0.16.0</a></li><li><a href="../../../../../0.15.0/user_guide/modules/sphinx/multiversion/gitlab_pages.html">0.15.0</a></li><li><a href="../../../../../0.14.0/user_guide/modules/sphinx/multiversion/gitlab_pages.html">0.14.0</a></li><li><a href="../../../../../0.13.0/user_guide/modules/sphinx/multiversion/gitlab_pages.html">0.13.0</a></li><li><a href="../../../../../0.12.0/user_guide/modules/sphinx/multiversion/gitlab_pages.html">0.12.0</a></li><li><a href="../../../../../0.11.0/user_guide/modules/sphinx/multiversion/gitlab_pages.html">0.11.0</a></li><li><a href="../../../../../0.10.0/user_guide/modules/sphinx/multiversion/gitlab_pages.html">0.10.0</a></li><li><a href="../../../../../0.9.0/user_guide/modules/sphinx/multiversion/gitlab_pages.html">0.9.0</a></li><li><a href="../../../../../0.8.0/user_guide/modules/sphinx/multiversion/gitlab_pages.html">0.8.0</a></li><li><a href="../../../../../0.7.0/user_guide/modules/sphinx/multiversion/gitlab_pages.html">0.7.0</a></li><li><a href="../../../../../0.6.2/user_guide/modules/sphinx/multiversion/gitlab_pages.html">0.6.2</a></li><li><a href="../../../../../0.6.1/user_guide/modules/sphinx/multiversion/gitlab_pages.html">0.6.1</a></li><li><a href="gitlab_pages.html">0.6.0</a></li><li><a href="../../../../../0.5.0/user_guide/modules/sphinx/multiversion/gitlab_pages.html">0.5.0</a></li><li><a href="../../../../../0.4.0/user_guide/modules/sphinx/multiversion/gitlab_pages.html">0.4.0</a></li><li><a href="../../../../../0.3.0/user_guide/modules/sphinx/multiversion/gitlab_pages.html">0.3.0</a></li><li><a href="../../../../../0.2.0/user_guide/modules/sphinx/multiversion/gitlab_pages.html">0.2.0</a></li><li><a href="../../../../../0.1.0/user_guide/modules/sphinx/multiversion/gitlab_pages.html">0.1.0</a></li></ul></div>
  </div><div class="sy-head-socials">
  <a href="https://github.com/exasol/python-toolbox" aria-label="GitHub">
    <iconify-icon icon="simple-icons:github"></iconify-icon>
  </a></div></div>
    </div>
    <div class="sy-head-actions flex items-center shrink-0 print:hidden"><button class="js-theme theme-switch flex items-center"
data-aria-auto="Switch to light color mode"
data-aria-light="Switch to dark color mode"
data-aria-dark="Switch to auto color mode">
<i class="i-lucide theme-icon"></i>
</button><button class="md:hidden flex items-center js-menu" aria-label="Menu" type="button" aria-controls="HeadNav" aria-expanded="false">
        <div class="hamburger">
          <span class="hamburger_1"></span>
          <span class="hamburger_2 -translate-x-2"></span>
          <span class="hamburger_3 -translate-x-1"></span>
        </div>
      </button>
    </div>
  </div>
</div>
<div class="sy-page sy-container flex mx-auto">
  <aside id="lside" class="sy-lside md:w-72 md:shrink-0 print:hidden">
    <div class="sy-lside-inner md:sticky">
      <div class="sy-scrollbar p-6">
        <div class="globaltoc" data-expand-depth="0"><ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../user_guide.html">👤 User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools.html">💻 Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../github_actions/github_actions.html">🦺 Github Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api.html">🧰 API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_guide/developer_guide.html">🛠 Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html">📝 Changelog</a></li>
</ul>

        </div>
      </div>
    </div>
  </aside>
  <div class="lside-overlay js-menu" role="button" aria-label="Close left sidebar" aria-controls="lside" aria-expanded="false"></div>
  <aside id="rside" class="sy-rside pb-3 w-64 shrink-0 order-last">
    <button class="rside-close js-menu xl:hidden" aria-label="Close Table of Contents" type="button" aria-controls="rside" aria-expanded="false">
      <i class="i-lucide close"></i>
    </button>
    <div class="sy-scrollbar sy-rside-inner px-6 xl:top-16 xl:sticky xl:pl-0 pt-6 pb-4"><div class="localtoc"><h3>On this page</h3><ul>
<li><a class="reference internal" href="#configure-your-project">Configure your project</a></li>
<li><a class="reference internal" href="#create-gitlab-ci-yml">Create <code class="docutils literal notranslate"><span class="pre">.gitlab-ci.yml</span></code></a></li>
</ul>
</div><div id="ethical-ad-placement" data-ea-publisher="readthedocs"></div></div>
  </aside>
  <div class="rside-overlay js-menu" role="button" aria-label="Close Table of Contents" aria-controls="rside" aria-expanded="false"></div>
  <main class="sy-main w-full max-sm:max-w-full print:pt-6"><div class="sy-breadcrumbs" role="navigation">
  <div class="sy-breadcrumbs-inner flex items-center">
    <div class="md:hidden mr-3">
      <button class="js-menu" aria-label="Menu" type="button" aria-controls="lside" aria-expanded="false">
        <i class="i-lucide menu"></i>
      </button>
    </div>
    <ol class="flex-1" itemscope itemtype="https://schema.org/BreadcrumbList"><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="../../../../index.html"><span itemprop="name">Exasol Toolbox</span></a>
        <span>/</span>
        <meta itemprop="position" content="1" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="../../../user_guide.html"><span itemprop="name">👤 User Guide</span></a>
        <span>/</span>
        <meta itemprop="position" content="2" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="../../modules.html"><span itemprop="name">📦 Modules</span></a>
        <span>/</span>
        <meta itemprop="position" content="3" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="../sphinx.html"><span itemprop="name">sphinx</span></a>
        <span>/</span>
        <meta itemprop="position" content="4" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="multiversion.html"><span itemprop="name">sphinx-multiversion</span></a>
        <span>/</span>
        <meta itemprop="position" content="5" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <strong itemprop="name">Hosting on GitLab Pages</strong>
        <meta itemprop="position" content="6" />
      </li></ol>
    <div class="xl:hidden ml-1">
      <button class="js-menu" aria-label="Show table of contents" type="button" aria-controls="rside"
        aria-expanded="false">
        <i class="i-lucide outdent"></i>
      </button>
    </div>
  </div>
</div><div class="flex flex-col break-words justify-between">
      <div class="min-w-0 max-w-6xl px-6 pb-6 pt-8 xl:px-12">
        <article class="yue" role="main">
          <section id="hosting-on-gitlab-pages">
<span id="gitlab-pages"></span><h1>Hosting on GitLab Pages<a class="headerlink" href="#hosting-on-gitlab-pages" title="Link to this heading">¶</a></h1>
<p>You use <a class="reference external" href="_gitlab_pages_website">GitLab Pages</a> to host documentation generated by <code class="docutils literal notranslate"><span class="pre">sphinx-multiversion</span></code>.</p>
<section id="configure-your-project">
<h2>Configure your project<a class="headerlink" href="#configure-your-project" title="Link to this heading">¶</a></h2>
<p>Because of the way GitLab checks out a repository when running a CI task, you’ll need to whitelist remote branches in your <code class="docutils literal notranslate"><span class="pre">conf.py</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">smv_remote_whitelist</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;^(origin)$&#39;</span>
</span></pre></div>
</div>
<p>If this is not specified, <code class="docutils literal notranslate"><span class="pre">sphinx-multiversion</span></code> will only be able to generate documentation for whitelisted tag patterns.</p>
</section>
<section id="create-gitlab-ci-yml">
<h2>Create <code class="docutils literal notranslate"><span class="pre">.gitlab-ci.yml</span></code><a class="headerlink" href="#create-gitlab-ci-yml" title="Link to this heading">¶</a></h2>
<p>GitLab pages always deploys your website from a specific folder called <code class="docutils literal notranslate"><span class="pre">public</span></code> in your repository. To deploy to your site, GitLab pages uses its built in continuous integration tools to build your site and publish it to the GitLab server. To accomplish this, you need to create a <code class="docutils literal notranslate"><span class="pre">.gitlab-ci.yml</span></code> in your repository. This recipe will build your documentation, move it to a folder named <code class="docutils literal notranslate"><span class="pre">public</span></code>, and then create an artifact compressing this folder. Populate it as follows.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="nt">test</span><span class="p">:</span>
</span><span data-line="2"><span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python:latest</span>
</span><span data-line="3"><span class="w">  </span><span class="nt">stage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test</span>
</span><span data-line="4"><span class="w">  </span><span class="nt">before_script</span><span class="p">:</span>
</span><span data-line="5"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">export</span>
</span><span data-line="6"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apt update -y</span>
</span><span data-line="7"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apt install -y texlive latexmk texlive-latex-extra</span><span class="w"> </span><span class="c1"># only necessary for pdf generation</span>
</span><span data-line="8"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip install -r requirements.txt</span>
</span><span data-line="9"><span class="w">  </span><span class="nt">script</span><span class="p">:</span>
</span><span data-line="10"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sphinx-multiversion docs/source/ public</span>
</span><span data-line="11"><span class="w">  </span><span class="nt">tags</span><span class="p">:</span>
</span><span data-line="12"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker</span><span class="w"> </span><span class="c1"># may need removal depending on what available GitLab runners are tagged with</span>
</span><span data-line="13"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bash</span>
</span><span data-line="14"><span class="w">  </span><span class="nt">only</span><span class="p">:</span>
</span><span data-line="15"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">branches</span>
</span><span data-line="16"><span class="w">  </span><span class="nt">except</span><span class="p">:</span>
</span><span data-line="17"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">master</span>
</span><span data-line="18">
</span><span data-line="19"><span class="nt">pages</span><span class="p">:</span>
</span><span data-line="20"><span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python:latest</span>
</span><span data-line="21"><span class="w">  </span><span class="nt">stage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deploy</span>
</span><span data-line="22"><span class="w">  </span><span class="nt">before_script</span><span class="p">:</span>
</span><span data-line="23"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">export</span>
</span><span data-line="24"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apt update -y</span>
</span><span data-line="25"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apt install -y texlive latexmk texlive-latex-extra</span><span class="w"> </span><span class="c1"># only necessary for pdf generation</span>
</span><span data-line="26"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip install -r requirements.txt</span>
</span><span data-line="27"><span class="w">  </span><span class="nt">script</span><span class="p">:</span>
</span><span data-line="28"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sphinx-multiversion docs/source public</span>
</span><span data-line="29"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w"> </span><span class="c1"># Add index.html to public root to redirect to $CI_DEFUALT_BRANCH/index.html</span>
</span><span data-line="30"><span class="w">      </span><span class="no">cat &gt;public/index.html &lt;&lt; EOF</span>
</span><span data-line="31"><span class="w">      </span><span class="no">&lt;!DOCTYPE html&gt;</span>
</span><span data-line="32"><span class="w">        </span><span class="no">&lt;html&gt;</span>
</span><span data-line="33"><span class="w">          </span><span class="no">&lt;head&gt;</span>
</span><span data-line="34"><span class="w">            </span><span class="no">&lt;title&gt;Redirecting to $CI_DEFAULT_BRANCH branch&lt;/title&gt;</span>
</span><span data-line="35"><span class="w">            </span><span class="no">&lt;meta charset=&quot;utf-8&quot;&gt;</span>
</span><span data-line="36"><span class="w">            </span><span class="no">&lt;meta http-equiv=&quot;refresh&quot; content=&quot;0; url=./$CI_DEFAULT_BRANCH/index.html&quot;&gt;</span>
</span><span data-line="37"><span class="w">            </span><span class="no">&lt;link rel=&quot;canonical&quot; href=&quot;$CI_PAGES_URL/$CI_DEFAULT_BRANCH/index.html&quot;&gt;</span>
</span><span data-line="38"><span class="w">          </span><span class="no">&lt;/head&gt;</span>
</span><span data-line="39"><span class="w">        </span><span class="no">&lt;/html&gt;</span>
</span><span data-line="40"><span class="w">      </span><span class="no">EOF</span>
</span><span data-line="41"><span class="w">  </span><span class="nt">tags</span><span class="p">:</span>
</span><span data-line="42"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker</span><span class="w"> </span><span class="c1"># may need removal depending on what available GitLab runners are tagged with</span>
</span><span data-line="43"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bash</span>
</span><span data-line="44"><span class="w">  </span><span class="nt">artifacts</span><span class="p">:</span>
</span><span data-line="45"><span class="w">    </span><span class="nt">paths</span><span class="p">:</span>
</span><span data-line="46"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">public</span>
</span><span data-line="47"><span class="w">  </span><span class="nt">only</span><span class="p">:</span>
</span><span data-line="48"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">develop</span>
</span></pre></div>
</div>
<p>This will create two jobs. The first job will test that documentation generation will complete successfully. This will run for every branch with the exception of <code class="docutils literal notranslate"><span class="pre">master</span></code>. The second task will deploy the generated documents to the GitLab pages server. This task will run only on changes to the <code class="docutils literal notranslate"><span class="pre">develop</span></code> branch. These rules should be updated to reflect your desired behaviour. Note that this includes the addition of a dummy <code class="file docutils literal notranslate"><span class="pre">index.html</span></code> to the root of your GitLab <code class="docutils literal notranslate"><span class="pre">public</span></code> directory that redirects to documentation on the <code class="docutils literal notranslate"><span class="pre">$CI_DEFAULT_BRANCH</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>A list of predefined environment variables available for use in <code class="docutils literal notranslate"><span class="pre">.gitlab-ci.yml</span></code> is available in the <a class="reference external" href="_gitlab_predefined_variables">GitLab Predefined variables reference</a>.</p>
</div>
<p>For deployments to <code class="docutils literal notranslate"><span class="pre">.gitlab.com</span></code>, the default domain for GitLab pages websites is <code class="docutils literal notranslate"><span class="pre">*.gitlab.io</span></code>. Your documentation should be available at <code class="docutils literal notranslate"><span class="pre">https://username.gitlab.io/reponame</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>For details, please have a look at the <a class="reference external" href="_gitlab_pages_tutorial">GitLab Pages Documentation</a>.</p>
</div>
</section>
</section>

        </article><button class="back-to-top" type="button">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
  </svg>
  <span>Back to top</span>
</button><div class="navigation flex print:hidden"><div class="navigation-prev">
    <a href="github_pages.html">
      <i class="i-lucide chevron-left"></i>
      <div class="page-info">
        <span>Previous</span><div class="title">Hosting on GitHub Pages</div></div>
    </a>
  </div><div class="navigation-next">
    <a href="faq.html">
      <div class="page-info">
        <span>Next</span>
        <div class="title">Frequently Asked Questions</div>
      </div>
      <i class="i-lucide chevron-right"></i>
    </a>
  </div></div></div>
    </div>
  </main>
</div>
<footer class="sy-foot">
  <div class="sy-foot-inner sy-container mx-auto">
    <div class="sy-foot-reserved md:flex justify-between items-center">
      <div class="sy-foot-copyright"><p>2022, Exasol</p>
  
  <p>
    Made with
    
    <a href="https://www.sphinx-doc.org/">Sphinx</a> and
    
    <a href="https://shibuya.lepture.com">Shibuya theme</a>.
  </p>
</div>
      <div class="sy-foot-socials">
<a href="https://github.com/exasol/python-toolbox" aria-label="GitHub">
  <iconify-icon icon="simple-icons:github"></iconify-icon>
</a></div>
    </div>
  </div>
</footer>
      <script src="../../../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../../../_static/tabs.js?v=3ee01567"></script>
      <script src="../../../../_static/design-tabs.js?v=f930bc37"></script>
      <script src="../../../../_static/shibuya.js?v=e2e99575"></script></body>
</html>